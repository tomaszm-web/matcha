{% extends "layout.html" %}
{% block content %}
	<section id="profile">
		<div class="container">
			<div class="row">
				<div class="col-12 col-md-6">
					<div class="carousel slide" id="profile-photos" data-ride="carousel">
						<div class="carousel-inner">
							<div class="carousel-item active">
								<img src="%% user.avatar %%" alt="Matcha" class="img-fluid">
							</div>
							{% for photo in user.photos %}
								{% if photo %}
									<div class="carousel-item">
										<img src="%% photo %%" alt="Matcha" class="img-fluid">
									</div>
								{% endif %}
							{% endfor %}
						</div>
						<a class="carousel-control-prev" href="#profile-photos" role="button"
						   data-slide="prev">
							<span class="carousel-control-prev-icon" aria-hidden="true"></span>
							<span class="sr-only">Previous</span>
						</a>
						<a class="carousel-control-next" href="#profile-photos" role="button"
						   data-slide="next">
							<span class="carousel-control-next-icon" aria-hidden="true"></span>
							<span class="sr-only">Next</span>
						</a>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<h4 class="profile__login">@%% user.login %%</h4>
					<div class="profile__status">
						{% if user.online %}
							<i class="fas fa-circle text-success"></i>
							online
						{% else %}
							<i class="fas fa-circle text-danger"></i>
							%% user.last_login if user.last_login else 'offline' %%
						{% endif %}
					</div>
					<h4 class="profile__title">Name:</h4>
					<div class="profile__name">
						%% user.name %%
						%% user.surname %%
					</div>
					<h4 class="profile__title">Fame Rating:</h4>
					<div class="progress profile__fame">
						<div class="progress-bar" style="width: %% user.fame %%%">%% user.login %%'s fame rating: %% user.fame %%%
						</div>
					</div>
					<h4 class="profile__title">Age:</h4>
					<div class="profile__age">%% user.age %%</div>

					<h4 class="profile__title">Gender:</h4>
					<div class="profile__gender">%% user.gender %%</div>

					<h4 class="profile__title">Preferences:</h4>
					<div class="profile__preferences">%% user.preferences %%</div>

					{% if user['biography'] %}
						<h4 class="profile__title">Biography:</h4>
						<div class="profile__bio">%% user.biography %%</div>
					{% endif %}

					{% if user['tags'] | length > 0 %}
						<h4 class="profile__title">Interest tags:</h4>
						<select class="form-control multiple-tags" disabled multiple>#}
							{% for tag in user["tags"] %}
								<option value="%% tag %%" selected>#%% tag %%</option>
							{% endfor %}
						</select>
					{% endif %}
					{% if cur_user and user.id != cur_user.id %}
						<div class="btn-group">
							<form action="%% url_for('like_user') %%" method="POST">
								<input type="hidden" name="csrf_token" value="%% csrf_token %%">
								<input type="hidden" name="unlike" value="%% user.id in cur_user.liked_users %%">
								<input type="hidden" name="liked_user" value="%% user.id %%">
								<button class="btn btn-success {% print('done') if user.id in cur_user.liked_users %}">
									<i class="fas fa-thumbs-up"></i>Like
								</button>
							</form>
							{% if user.id in cur_user.liked_users and cur_user.id in user.liked_users %}
								<a href="%% url_for('chat', recipient_id=user.id) %%" class="btn btn-primary chat-link">
									<i class="fas fa-comment"></i>Chat
								</a>
							{% endif %}
						</div>
						{% if user.id not in cur_user.liked_users %}
							<div class="btn-group">
								<button class="btn btn-danger blockUser {% print('done') if user.id in cur_user.blocked_users %}"
										data-blocked-user-id="%% user.id %%"
										data-user-id="%% cur_user.id %%">
									<i class="fas fa-ban"></i>Block user
								</button>

								<button class="btn btn-warning reportUser {% print('done') if user.id in cur_user.reported_users %}"
										data-reported-user-id="%% user.id %%"
										data-user-id="%% cur_user.id %%">
									<i class="fas fa-ban"></i>Report as fake
								</button>
							</div>
						{% endif %}
					{% endif %}
				</div>
			</div>
		</div>
	</section>
{% endblock %}