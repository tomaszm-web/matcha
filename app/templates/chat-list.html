{% extends "layout.html" %}
{% block content %}
	<section id="chat-list">
		<div class="container chat-list">
			<div class="row">
				<div class="col"><h2>Chat List</h2></div>
			</div>
			<div class="row">
				<div class="col-12">
					<div class="list-group">
						{% if chats %}
							{% for chat in chats %}
								{% set recipient_id = chat.recipient_id if chat.sender_id == cur_user.id else chat.sender_id %}
								<a href="%% url_for('chat_page', user_id=recipient_id) %%"
								   class="list-group-item text-light">
									<div class="col-3 col-sm-2">
										<img src="/static/img/default_avatar.png" alt="Matcha"
											 class="img-fluid img-round">
									</div>
									<p class=" text-truncate mb-0 col-5 col-sm-6">%% chat.message %%</p>
									<span class="timestamp col-4 text-right text-secondary">
										%% chat.timestamp %%
									</span>
								</a>
							{% endfor %}
						{% else %}
							<p class="text-secondary text-center">
								You don't have any chats...
							</p>
							<a href="%% url_for('index') %%" class="btn btn-primary">
								Return to the main page.
							</a>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}